写一个简单的从代码(golang) 到 pod 的工具

要求：

1. 在配置文件中填写代码 github 地址
2. 该工具自动编译对应的 docker image
3. 可以使用该工具启动一个 pod ，其中包含该 docker image

-----------------------------------------

### 我的理解

理想情况下，GitHub 地址对应的是一个 Golang 项目，用户将地址填写在一个配置文件中，
这个工具需要想办法根据配置文件，提供能力来生成一个带有最终编译产物的镜像。
并且该工具需要提供能力，让用户可以从镜像中派生出一个 container。

### 疑问

**关于要求 1**

1. 这个配置文件中还需要考虑填写其它的参数吗？
还是说文件中就一行，这一行的内容就是 GitHub 地址。

**关于要求 2**

1. 工具是否需要编译项目代码？
2. 是把编译产物放入镜像？还是把源代码 COPY 到镜像中？
还是说 Dockerfile 中有一个步骤是编译？
（目前个人理解，更倾向于最后这种情况）。

如果需要编译项目代码？

1. 那这个 Golang 项目的目录结构有标准吗？
2. 编译过程是在本地还是镜像中完成呢？
3. 这个基础镜像的选择有什么要求吗？

**关于要求 3**

1. 描述中的 pod 是泛指 container，还是特指 K8s 的 pod，还是其它意思？
2. “包含该 image” 的意思是不是类似下面这两个操作：
    - 先 `docker run -d $IMAGE`
    - 然后 `docker exec -it $CONTAINER_ID /bin/sh`  ？

### 疑惑解答

1. 配置文件中考虑下其他的参数，具体参数可以想一下有什么比较有用
2. 需要编译代码
3. 编译产物放入镜像中
4. 一般的 golang 结构即可
5. 编译过程在本地或镜像中都可以
6. 基础镜像没要求，可以使用 alpine
7. pod 是特指 k8s 的 pod


### 第二波疑问: 如果 pod 是特指 k8s 的 pod

思考：成功创建一个 pod 的前提是已经存在一个集群，并且使用者有权限操作这个集群。
用户有权限往一个镜像仓库推送镜像，集群节点有权限从这个仓库拉取镜像。
在绝大部分情况中，这样的使用者本地通常会有一个 kubectl 工具，相应可用的
kubeconfig 配置文件，docker 相关工具以及仓库相关配置文件。

1. 这个工具的使用者是对 K8s 有一定使用或运维经验的工程师呢？
还是一个对 K8s 几乎没有了解的开发者？
2. 假设工具使用者没有相关经验，那么这个工具就应该在一个特定的环境
（比如一台配置好相关工具的机器）中使用？

上面是一个理想情况，更多细分的疑问如下：

1. 是否需要考虑无可用集群、多集群，有集群无权限等情况？
2. 是不是可以大胆假设使用者有可用的 docker 环境？
3. 是不是可以大胆假设使用者有一个**可用**的 kubectl 工具和配置？
4. 使用者需要有权限往上推送镜像，node 需要有权限拉取镜像，

5. 如果上述几个前提假设不满足时，工具是不是只需要对用户进行简单提示即可？
使用者应该有能力根据工具的简单提示，然后自己做出正确的处理？

